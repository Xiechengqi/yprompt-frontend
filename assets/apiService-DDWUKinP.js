import{q as m,a1 as i}from"./index-B8ZGVk0I.js";const l="https://api.prompt-ui.xiechengqi.top";function y(){return localStorage.getItem("yprompt_token")}async function c(e,r={}){if(m()){const t=r.method||"GET",n=r.body?JSON.parse(r.body):void 0;return i(t,e,n)}const s=y(),u={"Content-Type":"application/json",...r.headers};s&&(u.Authorization=`Bearer ${s}`);const o=await fetch(`${l}${e}`,{...r,headers:u});if(!o.ok){let t="请求失败";try{const n=await o.json();if(t=n.message||t,n.code===401)throw localStorage.removeItem("yprompt_token"),localStorage.removeItem("yprompt_user"),new Error("未授权，请重新登录")}catch{t=`请求失败: ${o.status} ${o.statusText}`}throw new Error(t)}let a;try{a=await o.json()}catch(t){throw new Error(`响应解析失败: ${t instanceof Error?t.message:"未知错误"}`)}if(a.code===401)throw localStorage.removeItem("yprompt_token"),localStorage.removeItem("yprompt_user"),new Error("未授权，请重新登录");return a}async function h(e){return c(e,{method:"GET"})}async function p(e,r){return c(e,{method:"POST",body:r?JSON.stringify(r):void 0})}async function f(e){return c(e,{method:"DELETE"})}async function d(e){return p("/api/prompts",e)}async function E(){return h("/api/prompt-rules")}async function w(e){return p("/api/prompt-rules",e)}async function S(e){if(e&&e.length>0){const r={};return e.forEach(s=>{r[s]=null}),p("/api/prompt-rules",r)}else return f("/api/prompt-rules")}export{f as del,S as deleteUserPromptRules,h as get,E as getUserPromptRules,p as post,d as savePrompt,w as saveUserPromptRules};
