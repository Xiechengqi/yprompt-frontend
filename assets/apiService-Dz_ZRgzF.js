const m="";function i(){return localStorage.getItem("yprompt_token")}async function c(r,e={}){const n=i(),u={"Content-Type":"application/json",...e.headers};n&&(u.Authorization=`Bearer ${n}`);const o=await fetch(`${m}${r}`,{...e,headers:u});if(!o.ok){let t="请求失败";try{const a=await o.json();if(t=a.message||t,a.code===401)throw localStorage.removeItem("yprompt_token"),localStorage.removeItem("yprompt_user"),new Error("未授权，请重新登录")}catch{t=`请求失败: ${o.status} ${o.statusText}`}throw new Error(t)}let s;try{s=await o.json()}catch(t){throw new Error(`响应解析失败: ${t instanceof Error?t.message:"未知错误"}`)}if(s.code===401)throw localStorage.removeItem("yprompt_token"),localStorage.removeItem("yprompt_user"),new Error("未授权，请重新登录");return s}async function l(r){return c(r,{method:"GET"})}async function p(r,e){return c(r,{method:"POST",body:e?JSON.stringify(e):void 0})}async function y(r){return c(r,{method:"DELETE"})}async function f(r){return p("/api/prompts",r)}async function h(){return l("/api/prompt-rules")}async function g(r){return p("/api/prompt-rules",r)}async function E(r){if(r&&r.length>0){const e={};return r.forEach(n=>{e[n]=null}),p("/api/prompt-rules",e)}else return y("/api/prompt-rules")}export{y as del,E as deleteUserPromptRules,l as get,h as getUserPromptRules,p as post,f as savePrompt,g as saveUserPromptRules};
